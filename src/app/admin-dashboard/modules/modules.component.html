<div class="mt-5 p-4">
	<div class="mb-4 flex items-center justify-between">
		<div class="flex items-center">
			<i class="fa-solid fa-books text-3xl mr-2"></i>
			<h3 class="text-2xl font-semibold text-gray-900">Modules</h3>
		</div>
		<button  (click)="this.action='Ajouter'; this.showForm=true; this.validationError=false;" type="button"   class="text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
			<i class="fa-solid fa-plus me-2"></i>
			Ajouter Module
		</button>
	</div>



	<div *ngIf="this.showForm" class="bg-white p-4 rounded-lg shadow dark:bg-gray-700 animate-dropIn">
		<h4 class="text-lg font-semibold text-gray-900 dark:text-white">{{action}} un module</h4>
		<!-- Add form elements here for adding a new module -->
		<div *ngIf="this.validationError" class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
			<span class="font-medium">Erreur !</span> {{this.validationMessage}}
		</div>
		<form class="mt-3 grid grid-cols-3 gap-4">
			<div>
				<label for="moduleName" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Intitulé du module:</label>
				<input [(ngModel)]="this.module.intitule" type="text" name="intitule" id="intitule" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Intitulé du module" required="" [disabled]="action == 'Modifier'">
			</div>
			<div>
				<label for="VHcour" class="block text-sm font-medium text-gray-700 dark:text-gray-300">VH de cours:</label>
				<input   [(ngModel)]="this.module.vhcour" type="number" min="0" name="VHcour" id="VHcour" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="VH de cours" required="">
			</div>
			<div>
				<label for="VHtd" class="block text-sm font-medium text-gray-700 dark:text-gray-300">VH de TD:</label>
				<input  [(ngModel)]="this.module.vhtd" type="number" min="0" name="VHtd" id="VHtd" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="VH de TD" required="">
			</div>
			<div>
				<label for="VHtp" class="block text-sm font-medium text-gray-700 dark:text-gray-300">VH de TP:</label>
				<input  [(ngModel)]="this.module.vhtp" type="number" min="0" name="VHtp" id="VHtp" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="VH de TP" required="">
			</div>
			<div>
				<label for="NBeval" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre d'évaluations:</label>
				<input  [(ngModel)]="this.module.nbeval" type="number" min="0" name="NBeval" id="NBeval" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Nombre d'évaluations" required="">
			</div>
			<div>
				<label for="enseignant" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Filière:</label>
				<select  [(ngModel)]="this.filiere_id" name="fliere" id="filiere" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
					<option *ngFor="let filiere of this.filieres" [value]="filiere.id">{{filiere.nom}}</option>

				</select>
			</div>
			<div>
				<label for="enseignant" class="block text-sm font-medium text-gray-700 dark:text-gray-300">L'enseignant:</label>
				<select  [(ngModel)]="this.enseignant_id" name="enseignant" id="enseignant" class="mt-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
					<option *ngFor="let enseignant of this.ensiegnants" [value]="enseignant.email">PR. {{enseignant.nom+" "+enseignant.prenom}}</option>

				</select>
			</div>

			<!-- Add dropdown or search field for filiere -->

			<div class="mt-6 flex justify-start col-span-3">
				<!-- Add icon to Ajouter button -->
				<button  (click)="handleClick()" type="submit" class="mr-4 text-white bg-blue-500 hover:bg-blue-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
					<i *ngIf="this.action=='Ajouter'" class="fa-solid fa-plus me-2"></i>
					<i *ngIf="this.action=='Modifier'" class="fa-solid fa-pen-to-square me-2"></i>
					  {{action}} Module
				</button>

				<!-- Change color and add icon to Cancel button -->
				<button (click)="this.showForm=false;" type="submit" class="text-white bg-red-500 hover:bg-red-600 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800">
					<i class="fa fa-times-circle"></i> Cancel
				</button>
			</div>
		</form>
	</div>



	<div *ngIf="this.modules.length<=0" class="mt-3 p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 dark:bg-gray-800 dark:text-blue-400" role="alert">
		<span class="font-medium">Aucune module n'a été trouvée!</span> Veuillez créer des Modules.
	  </div>
	<div *ngIf="this.modules.length>0" class="mt-6 relative overflow-x-auto shadow-md sm:rounded-lg">
		<table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
			<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
				<tr>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						Intitulé
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						VHcours
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						VHtd
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						VHtp
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						NB évaluations
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						Filière
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						Enseignant
					</th>
					<th scope="col" class="px-6 py-3 text-gray-900 ">
						Actions
					</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let module of modules"  class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
					<td class="px-6 py-4">
						{{module.intitule}}
					</td>
					<td class="px-6 py-4">
						{{module.vhcour}}
					</td>
					<td class="px-6 py-4">
						{{module.vhtd}}
					</td>
					<td class="px-6 py-4">
						{{module.vhtp}}
					</td>
					<td class="px-6 py-4">
						{{module.nbeval}}
					</td>
					<td class="px-6 py-4">
						{{module.filiere.nom}}
					</td>
					<td class="px-6 py-4">
						PR.{{module.enseignant.nom+" "+module.enseignant.prenom}}
					</td>
					<td class="px-6 py-4">
						<button (click)="set_update(module);this.showForm=true;this.validationError=false;"   type="button" class=" focus:outline-none text-white bg-blue-500 hover:bg-blue-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:focus:ring-blue-900">
							<i class="fa-solid fa-pen-to-square me-2"></i>
						</button>
						<button (click)="delete(module.intitule)" type="button" class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
							<i class="fa-solid fa-trash me-2"></i>
						</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>










